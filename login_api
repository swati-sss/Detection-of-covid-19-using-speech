import React

@objc(CompassViewManager)
class CompassViewManager: RCTViewManager {
    
    @objc(setSrc:)
    public func setSrc(obj: [String: Any]) {
        guard let currentView = obj["view"] as? CompassView,
              let src = obj["json"] as? [String: Any] else {
            return
        }
        
        currentView.setSrc(src: src)
    }

    override func view() -> UIView! {
        if let compassViewLast = ViewController.shared.compassViewList.last {
            compassViewLast.removeFromSuperview()
            ViewController.shared.compassViewList.removeLast()
        }
        
        return CompassView()
    }

    override static func requiresMainQueueSetup() -> Bool {
        return true
    }
}
