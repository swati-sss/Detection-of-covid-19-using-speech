    func applyEnvironmentChangesAndReinitializeIfNeeded() {
        let trimmedStore = storeIDText.trimmingCharacters(in: .whitespacesAndNewlines)
        if Int(trimmedStore) == nil {
            storeIDText = String(Environment.initialStore)
        }

        let shouldReinitialize = compass != nil

        if shouldReinitialize {
            removeCompassAndDestroyRoot()
        }

        compass = nil
        currentStore = nil

        if shouldReinitialize {
            initialize(false)
        }
    }
